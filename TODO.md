# 烛龙（Zhulong）—— 局域网视频播放网站 - 项目 TODO 列表

## 项目状态

- 📋 **总进度**: 9/36 (25%)
- 🚀 **当前阶段**: 项目初始化
- 📅 **最后更新**: 2025-08-01

## 第一阶段：项目基础设施 (4/12)

### 后端基础架构

- [x] **BACKEND-001**: 初始化 Go 项目结构 (pkg, cmd, handler 等) - 已重新设计为 IDL 驱动的结构
- [-] **BACKEND-002**: 集成 Hertz 框架，实现基础 HTTP 服务 - 已取消，将使用 hz 工具重新实现
- [-] **BACKEND-003**: 配置 MinIO Go SDK 连接 - 已取消，将使用 hz 工具重新实现
- [-] **BACKEND-004**: 实现基础配置管理 (config/app.yml, config/minio.yml) - 已取消，将使用 hz 工具重新实现
- [x] **BACKEND-005**: 创建 Thrift IDL 文件定义 API 接口 🔴 P0
- [x] **BACKEND-006**: 使用 hz 工具初始化 Hertz 项目结构 🔴 P0
- [x] **BACKEND-007**: 实现 MinIO 存储服务集成 🜡 P1
- [x] **BACKEND-008**: 实现配置管理系统 (YAML 格式) 🜡 P1

### 开发环境搭建

- [x] **DEVOPS-001**: 创建 Podman Compose 配置文件 (compose.yml)
- [x] **DEVOPS-002**: 配置 MinIO 服务器环境
- [x] **DEVOPS-003**: 设置开发环境网络和存储配置
- [x] **DEVOPS-004**: 编写项目构建和部署脚本

## 第二阶段：视频存储核心功能 (4/10)

### MinIO 存储服务

- [x] **STORAGE-001**: 实现 MinIO 客户端初始化和连接测试
- [x] **STORAGE-002**: 创建视频存储桶 (zhulong-videos)
- [x] **STORAGE-003**: 实现文件上传功能 (支持分片上传)
- [x] **STORAGE-004**: 实现文件下载和预签名 URL 生成
- [x] **STORAGE-005**: 实现文件删除功能
- [x] **STORAGE-006**: 添加文件元数据管理

### 视频处理服务

- [ ] **VIDEO-001**: 实现视频格式验证 (MP4, WebM, AVI 等)
- [ ] **VIDEO-002**: 添加视频文件大小限制 (最大 2GB)
- [ ] **VIDEO-003**: 实现视频基础信息提取 (时长、分辨率等)
- [ ] **VIDEO-004**: 生成视频缩略图功能

## 第三阶段：后端 API 开发 (0/8)

### RESTful API 实现

- [ ] **API-001**: POST /api/v1/videos - 视频上传接口
- [ ] **API-002**: GET /api/v1/videos - 获取视频列表接口
- [ ] **API-003**: GET /api/v1/videos/:id - 获取单个视频信息
- [ ] **API-004**: GET /api/v1/videos/:id/play - 获取视频播放 URL
- [ ] **API-005**: DELETE /api/v1/videos/:id - 删除视频接口

### API 安全和验证

- [ ] **SECURITY-001**: 实现 IP 白名单限制 (局域网访问)
- [ ] **SECURITY-002**: 添加请求参数验证
- [ ] **SECURITY-003**: 实现访问日志记录

## 第四阶段：前端开发 (0/6)

### React 应用初始化

- [ ] **FRONTEND-001**: 初始化 React 项目结构
- [ ] **FRONTEND-002**: 配置构建工具 (Vite 或 Webpack)
- [ ] **FRONTEND-003**: 设置 ESLint 和 Prettier 代码规范

### 核心组件开发

- [ ] **COMPONENT-001**: 开发 VideoUpload 上传组件
- [ ] **COMPONENT-002**: 开发 VideoPlayer 播放器组件
- [ ] **COMPONENT-003**: 开发 VideoList 视频列表组件

## 完成标准

### 每个 TODO 项目的完成标准：

1. **功能实现**: 核心功能按需求规格实现
2. **单元测试**: 覆盖率达到 80%以上
3. **集成测试**: 通过 API 集成测试
4. **代码审查**: 代码通过团队审查
5. **文档更新**: 相关文档已更新

### 阶段性里程碑：

- **第一阶段完成**: 开发环境可正常运行
- **第二阶段完成**: MinIO 存储服务可用
- **第三阶段完成**: 后端 API 全部就绪
- **第四阶段完成**: 前端基础功能完成

## 新的开发流程 (IDL 驱动)

### IDL 设计优先

根据新的 Hertz + hz 工具最佳实践，所有后端开发都必须遵循 IDL 驱动的流程：

1. **API 设计**: 在 `idl/zhulong_api.thrift` 中定义所有 API 接口
2. **代码生成**: 使用 `hz new/update` 命令生成脚手架代码
3. **业务实现**: 在 `biz/handler/` 和 `biz/service/` 中实现具体逻辑
4. **测试编写**: 为所有业务逻辑编写单元测试
5. **集成测试**: 验证 API 接口的完整性

### 项目结构调整

由于采用 hz 工具，项目结构已经重新设计：

- **新增**: `idl/` 目录存放 Thrift 定义文件
- **新增**: `backend/hertz_gen/` 目录存放 hz 生成的代码
- **调整**: `backend/biz/` 目录采用 hz 标准布局
- **调整**: 所有构建和启动脚本由 hz 自动生成

## TODO 管理规范

### 状态标记：

- `[ ]` - 待开始
- `[*]` - 进行中
- `[x]` - 已完成
- `[!]` - 被阻塞
- `[-]` - 已取消

### 优先级标记：

- 🔴 P0 - 紧急 (阻塞其他任务)
- 🟡 P1 - 高优先级 (核心功能)
- 🟢 P2 - 中等优先级 (重要功能)
- 🔵 P3 - 低优先级 (优化功能)

### 更新流程：

1. 开始任务时，将 `[ ]` 改为 `[*]`
2. 完成任务时，将 `[*]` 改为 `[x]`
3. 每完成一项，更新总进度统计
4. 遇到阻塞时，标记为 `[!]` 并记录阻塞原因

---

**注意**: 此 TODO 列表遵循 TDD 开发流程，每个功能实现前必须先编写测试用例。
